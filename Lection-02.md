# Лекция 2

### Задачи современных сетей

* Обеспечение надежной передачи данных
  * Коды обнаружения и коррекции ошибок (EDC & ECC)
  * Специальные протоколы
  * Надежные маршруты

* Интерактивные сервисы
  * Обеспечение минимальных задержек

* Совместное использование ресурсов
  * Информационных
  * Оборудоания

* Доставка контента
  * Хранение реплик
  * Гео хеширование
  * Облачные сервисы

> [!Note]
> Сети решаю множество задач, поэтому было бы сложно разрабатывать для каждого приложения все с нуля.
> Как следствие, существует многоуровневая организация сетевого взяимодействия

### Интерфейсы

* Логическая или физическая граница между независимо взаимодействующими объектами
* **Физический** интерфейс - порт (электрические связи, разъемы, контакты)
* **Логический** интерфейс - протокол (информационное сообщение определенного формата и правил для работы с ними)

### Компоненты сетевой инфраструктуры

* Хосты
* Роутеры (или любой другое сетевое оборудование)
* Каналы связи
* Приложения

### Топологии сетей

* Полносвязная
* Ячеистая
* Кольцевая
* Звездообразная
* Иерархическая
* Шина

### Метрики

* Диаметр сети (D) - максимум расстояния между вершинами для всех пар вершин
* Связность (С) - минимальное количество ребер, которые нужно удалить для разделения сети передачи данных на две несвязные области
* Ширина бинарного деления (BW) - минимальное количество ребер, которое надо удалить для разделения сети передачи данных на две несвязные области одинакового размера
* Стоимость (Cst)

|Топология        | D                      | C         | BW                   | Cst                  |
|-----------------|------------------------|-----------|----------------------|----------------------|
|Полносвязная     | $1$                    | $p-1$     | $\frac{p^2}{4}$      | $\frac{p(p-1)}{2}$   |
|Двоичное дерево  | $2\log_2\frac{p-1}{2}$ | $1$       | $1$                  | $p-1$                |
|1-мерная решетка | $p-1$                  | $1$       | $1$                  | $p-1$                |
|2-мерная решетка | $2\sqrt{p-1}$          | $2$       | $\sqrt{p}$           | $2(p-\sqrt{p})$      |
|2D тор           | $\sqrt{\frac{p}{2}}$   | $4$       | $\frac{\sqrt{p}}{2}$ | $2p$                 |
|Гиперкуб         | $\log_2p$              | $\log_2p$ | $\frac{p}{2}$        | $p\frac{\log_2p}{2}$ |

### Уровни в иерархической сети

* Доступ (к примеру, пользователей)
* Распределение (агрегирование, баланс нагрузки, масштабирование, восстановление после поломки)
* Ядро (быстрые коммуникации, восстановление после поломки, баланс нагрузки, высокая надежность)

### Уровни OSI

* Прикладной
* Представительский
* Сеансовый
* Транспортный
* Сетевой
* Канальный
* Физический

## Устройства с разных уровней OSI

### Устройства физического уровня

* Шина
  * Коллизии - ситуация, когда два устройства, сидящих на шине, одновременно отправляют сигналы, и эти сигналы гасят друг друга
  * Конкуренция за среду передачи данных - если кто-то уже передает сообщения, то все остальные ждут, когда он закончит
  * Широковещательный домен - все устройста, сидящие на шине, получают переданную информацию

> [!Note]
> Для борьбы с коллизиями существовал алгоритм их обнаружения, поэтому у нас есть ограничения на минимальную длину передаваемых пакетов.

* Концентратор (Hub)
  * Коллизии
  * Широковещательный домен

* Повторитель
  * Использовался, когда надо было увеличить уровень сигнала

### Устройства канального уровня

* Мост (Bridge)
  * Пусть имеется 6 устройств, из которых первые 3 находятся слева от моста, а остальные - справа. Мост умеет не пускать сигнал с одной стороны на другую, если этого не нужно
  * Мост умный, потому что должен уметь отличать устройства слева и справа по их mac-адресам
  * Широковещательный канал

* Коммутатор (switch)
  * Нет доменных коллизий (не конкурируем за среду передачи данных)
  * По умолчанию коммутатор передаёт multicast-трафик как broadcast

### Устройства сетевого уровня

* Маршрутизаторы (Routers)
    * Передают сообщения между локальными сетями
    * Не передают broadcast-сообщения, но пропускают multicast-трафик
    * Нет доменных коллизий
* Switch L3

### Устройства транспортного уровня

* Шлюз (NAPT)
  * Нет доменных коллизий
  * Нет широковещания
 
### Прикладной уровень

* Proxy-сервера
  * Нет доменных коллизий
  * Нет широковещания
 
### Классификация сетей 

* По географическому принципу:
  * PAN - Personal Area Network
  * LAN - Local Area Network
  * CAN - Campus Area Network
  * MAN - Metropolitan Area Network
  * WAN - Wide Area Network

* По средам передачи данных:
  * Проводные
  * Беспроводные

* По принципам адресации абонентов (см. [Лекцию 1](https://github.com/AliakseiSuvorau/networks/blob/master/Lection-01.md#классификация-сетей-по-типу-адресации))

* По идентификаторам (см. [Лекцию 1](https://github.com/AliakseiSuvorau/networks/blob/master/Lection-01.md#классификация-сетей-по-идентификаторам))

* По типу адресации
  * Плоская (не можем сказать, где устрйство и чьё оно)
  * Иерархическая (.ru, .es, и т.д.)

### Коммутация

  * Каналов
    * Пусть мы нашли канал связли между устройствами. Займем его и будем передавать по нему информацию.
    * Минусы:
      * Можем надолго занять канал
      * Монопольно его используем

  * Пакетов
    * Делим пакеты на части и передаем небольшими порциями
    * Плюс:
      * Не занимаем канал надолго
    * Минус:
      * Накладные расходы на то, чтобы собрать потом пакеты обратно
  
> [!Note]
>  **Вывод** - нужна приоритетизация пакетов, т.е. когда более важные пакеты доставляются без очереди

### Продвижение пакетов

* Store/forward
  * Пока не получим все порции данных, не пропускаем их в порт дальше
  * Минус:
    * Возникает задержка

* Cut/through
  * Не задерживаем сигнал и передаем его дальше, как только получили
